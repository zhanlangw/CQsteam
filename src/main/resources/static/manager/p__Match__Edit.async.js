(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{JTWf:function(e,a,t){"use strict";t.r(a),t.d(a,"default",function(){return _});t("T2oS");var l,n,r,i,m=t("W9HT"),s=(t("IzEo"),t("bx4M")),c=(t("+L6B"),t("2/Rp")),o=(t("5NDa"),t("5rEg")),d=(t("14J3"),t("BMrR")),u=(t("giR+"),t("fyUT")),p=(t("jCWc"),t("kPKH")),h=t("jehZ"),E=t.n(h),g=(t("iQDF"),t("+eQT")),b=t("p0pE"),f=t.n(b),v=t("2Taf"),y=t.n(v),k=t("vZ4D"),C=t.n(k),T=t("l4Ni"),w=t.n(T),M=t("ujKo"),V=t.n(M),D=t("MhPg"),q=t.n(D),Y=(t("y8nQ"),t("Vl3Y")),x=(t("7Kak"),t("9yH6")),A=(t("sRBo"),t("kaz8")),H=t("q1tI"),N=t.n(H),S=t("MuoO"),F=t("usdK"),I=t("wd/R"),B=t.n(I),L=(A["a"].Group,x["a"].Group,{labelCol:{span:8},wrapperCol:{span:8}}),G=Y["a"].Item,_=(l=Y["a"].create(),n=Object(S["connect"])(function(e){var a=e.match,t=e.global,l=e.loading;return{category:a,area:t.area,loading:l.models.match}}),l(r=n((i=function(e){function a(){var e,t;y()(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return t=w()(this,(e=V()(a)).call.apply(e,[this].concat(n))),t.state={checkedList:[],confirmDirty:!1,checkAll:!1,indeterminate:!1},t.onChange=function(e){t.setState({checkedList:e})},t.checkAll=function(e){var a=t.props,l=a.form.setFieldsValue,n=a.area,r=e.target.checked;t.setState({indeterminate:!1,checkAll:r}),l(r?{areaIds:n.map(function(e){return e.key})}:{areaIds:void 0})},t.areaIdsChange=function(e){var a=t.props,l=a.form.setFieldsValue,n=a.area;e.length===n.length?t.setState({indeterminate:!1,checkAll:!0}):t.setState({indeterminate:!0,checkAll:!1}),l({areaIds:e})},t.checkMin=function(e,a,l){var n=t.props.form;a&&a<n.getFieldValue("minMember")?l("\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u5c0f\u4e8e\u6700\u5c0f\u6570\u91cf!"):(a&&t.state.confirmDirty&&n.validateFields(["minMember"],{force:!0}),l())},t.checkMax=function(e,a,l){var n=t.props.form;a&&a>n.getFieldValue("maxMember")?l("\u6700\u5c0f\u6570\u91cf\u4e0d\u80fd\u5927\u4e8e\u6700\u5927\u6570\u91cf!"):l()},t.handleConfirmBlur=function(e){var a=e.target.value;t.setState({confirmDirty:t.state.confirmDirty||!!a})},t.handleSubmit=function(){var e=t.props,a=e.dispatch,l=e.form.validateFields,n=e.match.params.id,r=e.category.match_item,i=r[n]||{};l(function(e,t){e||(delete t.match,t.signUpTime=B()(t.signUpTime).format("YYYY/MM/DD HH:mm:ss"),t.stages.map(function(e){e.endTime=B()(e.endTime).format("YYYY/MM/DD HH:mm:ss")}),a({type:"match/fetch_match_upd",payload:f()({},t,{status:i.status,id:n})}))})},t.disabledEndDate=function(e){var a=t.props.form.getFieldValue,l=a("signUpTime");return e&&e<B()(l).endOf("day")},t}return q()(a,e),C()(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.dispatch,l=a.match.params.id;t({type:"match/fetch_match_item",payload:{id:l},callback:function(a){t({type:"global/fetch_area",callback:function(t){e.setState({checkedList:a.stages.map(function(e){return e.type}),checkAll:t.length===a.area.length,indeterminate:t.length!==a.area.length})}})}})}},{key:"render",value:function(){var e=this,a=this.props,t=a.form.getFieldDecorator,l=a.loading,n=a.area,r=a.category.match_item,i=a.match.params.id,h=this.state,b=h.checkedList,f=h.checkAll,v=h.indeterminate,y=r[i]||{},k=y.area,C=void 0===k?[]:k,T=(y.creator,y.updateFlag,y.updateTime,y.telephoneType),w=y.abbreviation,M=(y.createTime,y.signUpTime),V=y.maxMember,D=y.name,q=y.stages,Y=void 0===q?[]:q,H=y.paramSetting,S=void 0===H?[]:H,I=y.status,_=y.minMember,R=y.group,U=void 0===R?[]:R,j=b.sort().map(function(a,l){var n,r={};Y.forEach(function(e){e.type===a&&(r=e)});var i=r.type||a;n=I>i;var m=1===i?"\u521d\u8d5b":2===i?"\u590d\u8d5b":"\u51b3\u8d5b";return N.a.createElement("div",{key:a},N.a.createElement("p",{style:{textAlign:"center",color:"#005d7e"}},N.a.createElement("span",null,m)),N.a.createElement(G,E()({},L,{label:"\u6750\u6599\u622a\u6b62\u65f6\u95f4"}),t("stages[".concat(l,"][endTime]"),{rules:[{required:!0,message:"\u6750\u6599\u622a\u6b62\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:r.endTime&&B()(r.endTime)||void 0})(N.a.createElement(g["a"],{showTime:!0,disabledDate:e.disabledEndDate,style:{width:"100%"},format:"YYYY/MM/DD HH:mm:ss",placeholder:"\u8bf7\u9009\u62e9\u6750\u6599\u622a\u6b62\u65f6\u95f4"}))),N.a.createElement(d["a"],{gutter:10},N.a.createElement(p["a"],{span:8},N.a.createElement("div",{style:{textAlign:"right",height:40,lineHeight:"40px",color:"rgba(0, 0, 0, 0.85)"}},N.a.createElement("span",{className:"ant-form-item-required"},"\u6750\u6599\u6570\u91cf\u914d\u7f6e(\u6700\u591a) :"))),N.a.createElement(p["a"],{span:8},N.a.createElement(d["a"],null,N.a.createElement(p["a"],{span:12},N.a.createElement(G,{labelCol:{span:7},wrapperCol:{span:17},label:"PPT"},t("stages[".concat(l,"][pptNum]"),{rules:[{required:!0,message:"\u6570\u91cf\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:r.pptNum})(N.a.createElement(u["a"],{disabled:n,min:0})))),N.a.createElement(p["a"],{span:12},N.a.createElement(G,{labelCol:{span:7},wrapperCol:{span:17},label:"\u6587\u4ef6"},t("stages[".concat(l,"][docNum]"),{rules:[{required:!0,message:"\u6570\u91cf\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:r.docNum})(N.a.createElement(u["a"],{disabled:n,min:0}))))),N.a.createElement(d["a"],null,N.a.createElement(p["a"],{span:12},N.a.createElement(G,{labelCol:{span:7},wrapperCol:{span:17},label:"\u89c6\u9891"},t("stages[".concat(l,"][videoNum]"),{rules:[{required:!0,message:"\u6570\u91cf\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:r.videoNum})(N.a.createElement(u["a"],{disabled:n,min:0})))),N.a.createElement(p["a"],{span:12},N.a.createElement(G,{labelCol:{span:7},wrapperCol:{span:17},label:"\u56fe\u7247"},t("stages[".concat(l,"][imageNum]"),{rules:[{required:!0,message:"\u6570\u91cf\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:r.imageNum})(N.a.createElement(u["a"],{disabled:n,min:0}))))))),N.a.createElement(G,{labelCol:{span:7},wrapperCol:{span:17}},t("stages[".concat(l,"][type]"),{initialValue:r.type||a})(N.a.createElement(o["a"],{type:"hidden"}))))});return N.a.createElement(s["a"],{bordered:!1},N.a.createElement(m["a"],{spinning:l},N.a.createElement(s["a"],null,N.a.createElement(G,E()({},L,{label:"\u7c7b\u522b\u540d\u79f0"}),t("name",{rules:[{required:!0,message:"\u7c7b\u522b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:D})(N.a.createElement(o["a"],{disabled:1!==I,placeholder:"\u8bf7\u586b\u5199\u7c7b\u522b\u540d\u79f0"}))),N.a.createElement(G,E()({},L,{label:"\u7b80\u79f0"}),t("abbreviation",{rules:[{required:!0,message:"\u7b80\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:w})(N.a.createElement(o["a"],{disabled:1!==I,placeholder:"\u8bf7\u586b\u5199\u7b80\u79f0"}))),N.a.createElement(d["a"],{gutter:10},N.a.createElement(p["a"],{span:8},N.a.createElement("div",{style:{textAlign:"right",height:40,lineHeight:"40px",color:"rgba(0, 0, 0, 0.85)"}},N.a.createElement("span",{className:"ant-form-item-required"},"\u6210\u5458\u6570\u91cf\u914d\u7f6e :"))),N.a.createElement(p["a"],{span:4},N.a.createElement(G,{labelCol:{span:7},wrapperCol:{span:17},label:"\u6700\u5c11"},t("minMember",{rules:[{required:!0,message:"\u6700\u5c11\u6570\u91cf\u4e0d\u80fd\u4e3a\u7a7a"},{validator:this.checkMax}],initialValue:_})(N.a.createElement(u["a"],{disabled:1!==I,onBlur:this.handleConfirmBlur,min:1})))),N.a.createElement(p["a"],{span:4},N.a.createElement(G,{labelCol:{span:7},wrapperCol:{span:17},label:"\u6700\u591a"},t("maxMember",{rules:[{required:!0,message:"\u6700\u591a\u6570\u91cf\u4e0d\u80fd\u4e3a\u7a7a"},{validator:this.checkMin}],initialValue:V})(N.a.createElement(u["a"],{disabled:1!==I,onBlur:this.handleConfirmBlur,min:1}))))),N.a.createElement(G,E()({},L,{label:"\u7ec4\u522b\u914d\u7f6e"}),t("group",{rules:[{required:!0,message:"\u7ec4\u522b\u914d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:U})(N.a.createElement(A["a"].Group,{disabled:1!==I,style:{width:"100%",marginTop:9}},N.a.createElement(d["a"],null,N.a.createElement(p["a"],{span:6},N.a.createElement(A["a"],{value:1},"\u5c0f\u5b66")),N.a.createElement(p["a"],{span:6},N.a.createElement(A["a"],{value:2},"\u521d\u4e2d")),N.a.createElement(p["a"],{span:6},N.a.createElement(A["a"],{value:3},"\u9ad8\u4e2d")),N.a.createElement(p["a"],{span:6},N.a.createElement(A["a"],{value:4},"\u4e2d\u5b66")))))),N.a.createElement(G,E()({},L,{label:"\u7701\u4efd\u914d\u7f6e"}),N.a.createElement("div",{style:{height:200,overflow:"auto",paddingLeft:48,border:"1px solid #eee",borderRadius:5}},N.a.createElement(d["a"],{style:{marginLeft:-24}},N.a.createElement(p["a"],{span:24},N.a.createElement(A["a"],{disabled:1!==I,checked:f,indeterminate:v,onChange:this.checkAll,value:"*"},"\u5168\u9009"))),t("areaIds",{rules:[{required:!0,message:"\u7701\u4efd\u914d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:C.map(function(e){return e.id})})(N.a.createElement(A["a"].Group,{disabled:1!==I,onChange:this.areaIdsChange,style:{width:"100%",marginTop:-6}},N.a.createElement(d["a"],null,n.map(function(e){return N.a.createElement(p["a"],{style:{marginTop:8},key:e.key,span:24},N.a.createElement(A["a"],{value:e.key},e.title))})))))),N.a.createElement(G,{labelCol:{span:8},wrapperCol:{span:16},label:"\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u9009\u9879"},t("paramSetting",{rules:[{required:!0,message:"\u9009\u9879\u914d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:S})(N.a.createElement(A["a"].Group,{disabled:1!==I,style:{width:"100%",marginTop:9}},N.a.createElement(d["a"],null,N.a.createElement(p["a"],{span:24},N.a.createElement(A["a"],{value:1},"\u662f\u5426\u9700\u8981\u9009\u62e9\u6210\u5458\u8eab\u4efd"),N.a.createElement(A["a"],{value:2},"\u662f\u5426\u9700\u8981\u9009\u62e9\u6559\u6388\u5b66\u79d1"),N.a.createElement(A["a"],{value:3},"\u662f\u5426\u9700\u8981\u586b\u5199\u6307\u5bfc\u8001\u5e08")),N.a.createElement(p["a"],{span:24,style:{marginTop:12}},N.a.createElement(A["a"],{value:4},"\u662f\u5426\u9700\u8981\u586b\u5199\u9879\u76ee\u540d\u79f0\uff0c\u9879\u76ee\u7b80\u4ecb"),N.a.createElement(A["a"],{value:5},"\u662f\u5426\u9700\u8981\u586b\u5199\u62a4\u7167\u53f7\u7801\u3001\u7236\u6bcd\u59d3\u540d\u3001\u7236\u6bcd\u624b\u673a\u53f7\u3001\u5730\u5740")))))),N.a.createElement(G,E()({},L,{label:"\u624b\u673a\u53f7"}),t("telephoneType",{rules:[{required:!0,message:"\u624b\u673a\u53f7\u9009\u62e9\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:T})(N.a.createElement(x["a"].Group,{disabled:1!==I,style:{width:"100%"}},N.a.createElement(x["a"],{value:1},"\u5b66\u751f\u5bb6\u957f\u624b\u673a\u53f7"),N.a.createElement(x["a"],{value:2},"\u624b\u673a\u53f7")))),N.a.createElement(G,E()({},L,{label:"\u62a5\u540d\u5f00\u59cb\u65f6\u95f4"}),t("signUpTime",{rules:[{required:!0,message:"\u62a5\u540d\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:M&&B()(M)||void 0})(N.a.createElement(g["a"],{disabled:1!==I,showTime:!0,style:{width:"100%"},format:"YYYY/MM/DD HH:mm:ss",placeholder:"\u8bf7\u9009\u62e9\u62a5\u540d\u5f00\u59cb\u65f6\u95f4"}))),N.a.createElement(G,E()({},L,{label:"\u6bd4\u8d5b\u9636\u6bb5"}),t("match",{rules:[{required:!0,message:"\u6bd4\u8d5b\u9636\u6bb5\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:Y.map(function(e){return e.type})})(N.a.createElement(A["a"].Group,{disabled:1!==I,onChange:this.onChange,style:{width:"100%",marginTop:9}},N.a.createElement(d["a"],null,N.a.createElement(p["a"],{span:6},N.a.createElement(A["a"],{value:1},"\u521d\u8d5b")),N.a.createElement(p["a"],{span:6},N.a.createElement(A["a"],{value:2},"\u590d\u8d5b")),N.a.createElement(p["a"],{span:6},N.a.createElement(A["a"],{value:3},"\u51b3\u8d5b")))))),j,N.a.createElement("div",{style:{textAlign:"center"}},N.a.createElement(c["a"],{disabled:I>3,loading:l,onClick:this.handleSubmit,type:"primary"},"\u786e\u5b9a"),N.a.createElement(c["a"],{onClick:function(){F["a"].push("/match/list")},style:{marginLeft:48}},"\u53d6\u6d88")))))}}]),a}(H["Component"]),r=i))||r)||r)}}]);