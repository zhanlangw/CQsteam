(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{pp7v:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return S});a("IzEo");var n,r,i,l,d=a("bx4M"),o=(a("T2oS"),a("W9HT")),c=(a("14J3"),a("BMrR")),s=(a("jCWc"),a("kPKH")),p=(a("DZo9"),a("8z0m")),m=(a("+L6B"),a("2/Rp")),u=a("jehZ"),g=a.n(u),f=(a("5NDa"),a("5rEg")),v=(a("2qtc"),a("kLXV")),h=a("p0pE"),E=a.n(h),y=(a("miYZ"),a("tsqr")),b=a("2Taf"),x=a.n(b),k=a("vZ4D"),A=a.n(k),w=a("l4Ni"),P=a.n(w),M=a("ujKo"),_=a.n(M),C=a("rlhR"),L=a.n(C),B=a("MhPg"),F=a.n(B),T=(a("y8nQ"),a("Vl3Y")),V=a("q1tI"),j=a.n(V),O=a("MuoO"),R={labelCol:{span:6},wrapperCol:{span:12}},D=T["a"].Item,S=(n=T["a"].create(),r=Object(O["connect"])(function(e){var t=e.advert,a=e.loading;return{advert:t,loading:a.models.advert}}),n(i=r((l=function(e){function t(){var e,a;x()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=P()(this,(e=_()(t)).call.apply(e,[this].concat(r))),a.state={visible:!1,data:{},isEdit:!1},a.closeModal=function(){var e=a.props.form.resetFields;e(),a.setState({visible:!1})},a.openModal=function(){a.setState({visible:!0})},a.normFile=function(e){return Array.isArray(e)?e:e.file.status?e&&e.fileList:e&&e.fileList&&e.fileList.filter(function(e){return!!e.response})},a.beforeUpload=function(e,t){var n=a.props.form.getFieldValue,r=n(t);if(r&&1===r.length)return y["a"].warning("\u53ea\u80fd\u4e0a\u4f201\u4e2a\u6587\u4ef6\uff01"),!1},a.fileMove=function(e){var t=a.props.dispatch;return e.response&&t({type:"global/fetch_file_del",payload:{path:e.response.value}}),!0},a.handleOk=function(){var e=a.props,t=e.dispatch,n=e.form.validateFields,r=a.state.isEdit,i=L()(a);n(function(e,a){e||(a.imagePath=a.imagePath[0].response.value,r?t({type:"advert/fetch_advert_upd",payload:E()({},a),callback:function(){i.closeModal()}}):(delete a.id,t({type:"advert/fetch_advert_add",payload:E()({},a),callback:function(){i.closeModal()}})))})},a.delAdvert=function(e){var t=a.props.dispatch;v["a"].confirm({title:"\u63d0\u793a?",content:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"advert/fetch_advert_del",payload:{id:e}})}})},a.addAdvert=function(){a.setState({isEdit:!1,data:{},visible:!0})},a.editAdvert=function(e){a.setState({isEdit:!0,data:e,visible:!0})},a}return F()(t,e),A()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"advert/fetch_advert_list"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.loading,r=t.advert,i=r.advert_list,l=(r.advert_item,this.state),u=l.visible,h=l.data,E=l.isEdit,y=i.filter(function(e){return 1===e.type}),b=i.filter(function(e){return 2===e.type}),x=i.filter(function(e){return 3===e.type});return j.a.createElement(d["a"],{bordered:!1},j.a.createElement(o["a"],{spinning:n},j.a.createElement(v["a"],{title:E?"\u4fee\u6539\u5e7f\u544a":"\u65b0\u5efa\u5e7f\u544a",visible:u,onOk:this.handleOk,confirmLoading:n,onCancel:this.closeModal},j.a.createElement(D,g()({},R,{label:"\u5916\u94fe\u5730\u5740"}),a("url",{initialValue:h.url})(j.a.createElement(f["a"],{placeholder:"\u8bf7\u8f93\u5165\u5916\u94fe\u5730\u5740"}))),j.a.createElement(D,g()({},R,{label:"\u56fe\u7247"}),a("imagePath",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u56fe\u7247"}],valuePropName:"fileList",getValueFromEvent:this.normFile,initialValue:h.imagePath&&[{uid:"-1",name:h.imagePath.split("/")[h.imagePath.split("/").length-1],status:"done",response:{value:h.imagePath}}]||void 0})(j.a.createElement(p["a"],{name:"file",showUploadList:{showPreviewIcon:!1},listType:"picture-card",action:"/api/file/upload?fileType=5",accept:".jpg,.jpeg,.png",beforeUpload:function(t){return e.beforeUpload(t,"imagePath")},onRemove:this.fileMove},j.a.createElement(m["a"],{size:"small",type:"primary"},"\u4e0a\u4f20")))),j.a.createElement(D,R,a("id",{initialValue:h.id})(j.a.createElement(f["a"],{type:"hidden"})))),j.a.createElement(c["a"],{gutter:16,style:{borderBottom:"1px solid #d9d9d9"}},j.a.createElement(s["a"],{span:12},j.a.createElement("div",{style:{textAlign:"center",padding:24,color:"#005d7e",fontWeight:600}},"\u9879\u76ee\u57fa\u672c\u4fe1\u606f"),j.a.createElement(c["a"],{gutter:16,style:{marginBottom:24}},j.a.createElement(s["a"],{span:6},j.a.createElement("div",{style:{textAlign:"right",padding:"6px 12px"}},"\u5916\u94fe\u5730\u5740 :")),j.a.createElement(s["a"],{span:12},y[0]&&y[0].url&&j.a.createElement("div",{style:{padding:"6px 12px",overflow:"auto",border:"1px solid #d9d9d9",height:120,background:"#f4f4f4",borderRadius:4,wordBreak:"break-all"}},y[0]&&y[0].url))),j.a.createElement(c["a"],{gutter:16},j.a.createElement(s["a"],{span:6},j.a.createElement("div",{style:{textAlign:"right",padding:"6px 12px"}},"\u56fe\u7247 :")),j.a.createElement(s["a"],{span:12},j.a.createElement("div",null,j.a.createElement("img",{style:{width:"100%"},src:y[0]&&y[0].imagePath,alt:""})))),j.a.createElement("div",{style:{textAlign:"center",padding:24}},j.a.createElement(m["a"],{onClick:function(){return e.editAdvert(y[0])},type:"primary"},"\u4fee\u6539"))),j.a.createElement(s["a"],{span:12},j.a.createElement("div",{style:{textAlign:"center",padding:24,color:"#005d7e",fontWeight:600}},"\u63d0\u4ea4\u9879\u76ee\u72b6\u6001"),j.a.createElement(c["a"],{gutter:16,style:{marginBottom:24}},j.a.createElement(s["a"],{span:6},j.a.createElement("div",{style:{textAlign:"right",padding:"6px 12px"}},"\u5916\u94fe\u5730\u5740 :")),j.a.createElement(s["a"],{span:12},b[0]&&b[0].url&&j.a.createElement("div",{style:{padding:"6px 12px",height:120,overflow:"auto",border:"1px solid #d9d9d9",background:"#f4f4f4",borderRadius:4,wordBreak:"break-all"}},b[0]&&b[0].url))),j.a.createElement(c["a"],{gutter:16},j.a.createElement(s["a"],{span:6},j.a.createElement("div",{style:{textAlign:"right",padding:"6px 12px"}},"\u56fe\u7247 :")),j.a.createElement(s["a"],{span:12},j.a.createElement("div",null,j.a.createElement("img",{style:{width:"100%"},src:b[0]&&b[0].imagePath,alt:""})))),j.a.createElement("div",{style:{textAlign:"center",padding:24}},j.a.createElement(m["a"],{onClick:function(){return e.editAdvert(b[0])},type:"primary"},"\u4fee\u6539")))),j.a.createElement("div",{style:{textAlign:"center",padding:24,color:"#005d7e",fontWeight:600}},"\u9996\u9875\u5e7f\u544a"),j.a.createElement("div",{style:{padding:24}},j.a.createElement(m["a"],{onClick:this.addAdvert,type:"primary"},"\u65b0\u5efa\u5e7f\u544a")),j.a.createElement(c["a"],{gutter:16},x.map(function(t){return j.a.createElement(s["a"],{key:t.id,span:6},j.a.createElement("div",null,j.a.createElement("img",{style:{width:"100%"},src:t.imagePath,alt:""})),j.a.createElement("div",{style:{textAlign:"center",padding:24}},j.a.createElement(m["a"],{onClick:function(){return e.delAdvert(t.id)}},"\u5220\u9664"),j.a.createElement(m["a"],{style:{marginLeft:24},onClick:function(){return e.editAdvert(t)},type:"primary"},"\u4fee\u6539")))}))))}}]),t}(V["PureComponent"]),i=l))||i)||i)}}]);