(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[61],{L9vU:function(e,a,t){"use strict";t.r(a),t.d(a,"default",function(){return q});t("IzEo");var n,r,o,s,i=t("bx4M"),l=(t("DZo9"),t("8z0m")),p=(t("+L6B"),t("2/Rp")),u=t("jehZ"),c=t.n(u),d=(t("5NDa"),t("5rEg")),m=t("p0pE"),f=t.n(m),h=(t("miYZ"),t("tsqr")),v=t("2Taf"),g=t.n(v),y=t("vZ4D"),b=t.n(y),E=t("l4Ni"),w=t.n(E),L=t("ujKo"),U=t.n(L),F=t("MhPg"),_=t.n(F),k=(t("y8nQ"),t("Vl3Y")),M=t("q1tI"),V=t.n(M),j=t("MuoO"),C=t("usdK"),D={labelCol:{span:4},wrapperCol:{span:8}},R=k["a"].Item,q=(n=k["a"].create(),r=Object(j["connect"])(function(e){var a=e.sponsors,t=e.loading;return{sponsors:a,loading:t.models.sponsors}}),n(o=r((s=function(e){function a(){var e,t;g()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=w()(this,(e=U()(a)).call.apply(e,[this].concat(r))),t.normFile=function(e){return Array.isArray(e)?e:e.file.status?e&&e.fileList:e&&e.fileList&&e.fileList.filter(function(e){return!!e.response})},t.beforeUpload=function(e,a){var n=t.props.form.getFieldValue,r=n(a);if(r&&1===r.length)return h["a"].warning("\u53ea\u80fd\u4e0a\u4f201\u4e2a\u6587\u4ef6\uff01"),!1},t.fileMove=function(e){var a=t.props.dispatch;return e.response&&a({type:"global/fetch_file_del",payload:{path:e.response.value}}),!0},t.handleSubmit=function(){var e=t.props,a=e.dispatch,n=e.form.validateFields,r=e.match.params.id;n(function(e,t){e||a({type:"sponsors/fetch_sponsors_upd",payload:f()({},t,{path:t.path[0].response.value,id:r})})})},t}return _()(a,e),b()(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.dispatch,t=e.match.params.id;e.form.setFieldsValue;a({type:"sponsors/fetch_sponsors_item",payload:{id:t}})}},{key:"render",value:function(){var e=this,a=this.props,t=a.form.getFieldDecorator,n=a.loading,r=a.match.params.id,o=a.sponsors.sponsors_item,s=o[r]||{},u=s.url,m=s.path;return V.a.createElement(i["a"],{bordered:!1},V.a.createElement(i["a"],null,V.a.createElement(R,c()({},D,{label:"\u8d5e\u52a9\u5546URL"}),t("url",{sponsors:[{required:!0,message:"\u8d5e\u52a9\u5546URL\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:u})(V.a.createElement(d["a"],{placeholder:"\u8bf7\u586b\u5199\u8d5e\u52a9\u5546URL"}))),V.a.createElement(R,c()({},D,{label:"\u56fe\u7247"}),t("path",{sponsors:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u56fe\u7247"}],valuePropName:"fileList",getValueFromEvent:this.normFile,initialValue:m&&[{uid:"-1",name:m.split("/")[m.split("/").length-1],status:"done",response:{value:m},url:m}]||void 0})(V.a.createElement(l["a"],{name:"file",showUploadList:{showPreviewIcon:!1},listType:"picture-card",action:"/api/file/upload?fileType=5",accept:".jpg,.jpeg,.png",beforeUpload:function(a){return e.beforeUpload(a,"path")},onRemove:this.fileMove},V.a.createElement(p["a"],{size:"small",type:"primary"},"\u4e0a\u4f20")))),V.a.createElement("div",{style:{textAlign:"center"}},V.a.createElement(p["a"],{loading:n,onClick:this.handleSubmit,type:"primary"},"\u786e\u5b9a"),V.a.createElement(p["a"],{onClick:function(){C["a"].push("/sponsors/list")},style:{marginLeft:48}},"\u53d6\u6d88"))))}}]),a}(M["PureComponent"]),o=s))||o)||o)}}]);