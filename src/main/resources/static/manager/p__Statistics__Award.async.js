(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[64],{pRtG:function(a,e,t){"use strict";t.r(e),t.d(e,"default",function(){return A});t("IzEo");var n,r,l,i,c=t("bx4M"),o=(t("T2oS"),t("W9HT")),s=(t("+L6B"),t("2/Rp")),p=(t("14J3"),t("BMrR")),d=(t("6UJt"),t("DFOY")),m=(t("jCWc"),t("kPKH")),u=t("jehZ"),y=t.n(u),g=(t("5Dmo"),t("3S7+")),h=t("eHn4"),f=t.n(h),E=t("p0pE"),v=t.n(E),w=t("2Taf"),_=t.n(w),C=t("vZ4D"),I=t.n(C),b=t("l4Ni"),O=t.n(b),k=t("ujKo"),D=t.n(k),V=t("MhPg"),T=t.n(V),F=(t("y8nQ"),t("Vl3Y")),P=(t("OaEy"),t("2fM7")),M=t("q1tI"),j=t.n(M),R=(t("OT3T"),t("MuoO")),S=t("Qyje"),J=(t("wd/R"),t("KTCi")),L=P["a"].Option,x={labelCol:{span:4},wrapperCol:{span:18}},z=F["a"].Item,A=(n=F["a"].create(),r=Object(R["connect"])(function(a){var e=a.statistics,t=a.loading;return{statistics:e,loading:t.models.statistics}}),n(l=r((i=function(a){function e(){var a,t;_()(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=O()(this,(a=D()(e)).call.apply(a,[this].concat(r))),t.categoryChange=function(a,e,n){var r=t.props,l=r.dispatch,i=r.form.setFieldsValue,c=r.statistics,o=c.award_areaOption,s=c.award_groupOption,p=c.award_data_params;l({type:"statistics/fetch_category_item",payload:{id:a},params:{type:e,stage:n},callback:function(a){l({type:"statistics/changeAreaOption",payload:v()({},o,f()({},"line".concat(e),a.area.map(function(a){return{value:a.id,label:a.name,isLeaf:!1}}))),params:{type:3}}),l({type:"statistics/changeGroupOption",payload:v()({},s,f()({},"line".concat(e),a.group)),params:{type:3}}),i(f()({},"params[".concat(e-1,"][areaId]"),void 0)),i(f()({},"params[".concat(e-1,"][group]"),void 0)),i(f()({},"params[".concat(e-1,"][schoolId]"),void 0))}}),l({type:"statistics/changeDataParams",payload:v()({},p,f()({},"line".concat(e),v()({},p["line".concat(e)],{categoryId:a}))),params:{type:3}})},t.loadCascaderData=function(a,e){var n=t.props,r=n.dispatch,l=n.statistics.award_areaOption,i=a[a.length-1];i.loading=!0,r({type:"global/fetch_area",payload:{id:i.value},callback:function(a){i.loading=!1,i.children=a.map(function(a){return{label:a.title,value:a.key,isLeaf:a.isLeaf}}),r({type:"statistics/changeAreaOption",payload:v()({},l),params:{type:3}})}})},t.cascaderChange=function(a,e){var n=t.props,r=n.dispatch,l=n.form.setFieldsValue,i=n.statistics.award_data_params;r({type:"statistics/changeDataParams",payload:v()({},i,f()({},"line".concat(e),v()({},i["line".concat(e)],{areaId:a}))),params:{type:3}}),l(f()({},"params[".concat(e-1,"][schoolId]"),void 0)),l(f()({},"params[".concat(e-1,"][group]"),void 0))},t.groupChange=function(a,e){var n=t.props,r=n.dispatch,l=n.form,i=l.setFieldsValue,c=l.getFieldValue,o=n.statistics,s=o.award_schoolOption,p=o.award_data_params,d=c("params[".concat(e-1,"][areaId]"));d=d[d.length-1],r({type:"statistics/fetch_school_list",payload:{areaId:d,start:0,count:1e5,group:a},callback:function(a){r({type:"statistics/changeSchoolOption",payload:v()({},s,f()({},"line".concat(e),a)),params:{type:3}}),i(f()({},"params[".concat(e-1,"][schoolId]"),void 0))}}),r({type:"statistics/changeDataParams",payload:v()({},p,f()({},"line".concat(e),v()({},p["line".concat(e)],{group:a}))),params:{type:3}})},t.schoolChange=function(a,e){var n=t.props,r=n.dispatch,l=n.statistics.award_data_params;r({type:"statistics/changeDataParams",payload:v()({},l,f()({},"line".concat(e),v()({},l["line".concat(e)],{schoolId:a}))),params:{type:3}})},t.genderChange=function(a,e){var n=t.props,r=n.dispatch,l=n.statistics.award_data_params;r({type:"statistics/changeDataParams",payload:v()({},l,f()({},"line".concat(e),v()({},l["line".concat(e)],{gender:a}))),params:{type:3}})},t.handleSubmit=function(){var a=t.props,e=a.dispatch,n=a.form.validateFields,r=a.statistics.award_data_params,l=r.line1,i=r.line2;n(function(a,t){a||(e({type:"statistics/fetch_award_data",payload:v()({},l),params:{type:1}}),e({type:"statistics/fetch_award_data",payload:v()({},i),params:{type:2}}))})},t.handleReset=function(){var a=t.props,e=a.dispatch,n=a.form.resetFields;n(),e({type:"statistics/fetch_award_data",payload:{},params:{type:1}}),e({type:"statistics/fetch_award_data",payload:{},params:{type:2}})},t}return T()(e,a),I()(e,[{key:"componentDidMount",value:function(){var a=this.props,e=a.dispatch,t=a.statistics.award_data_params,n=t.line1,r=t.line2;e({type:"statistics/fetch_category_list",payload:{start:0,count:1e4}}),e({type:"statistics/fetch_award_data",payload:v()({},n),params:{type:1}}),e({type:"statistics/fetch_award_data",payload:v()({},r),params:{type:2}})}},{key:"render",value:function(){var a=this,e=this.props,t=e.statistics,n=t.award_data,r=n.line1,l=n.line2,i=t.award_data_params,u=i.line1,h=i.line2,f=t.category_list,E=t.award_category_item,v=(E.line1,E.line2,t.award_areaOption),w=t.award_groupOption,_=t.award_schoolOption,C=e.loading,I=e.form.getFieldDecorator,b=r.map(function(a,e){return{x:a.prize,y1:a.count,y2:l[e]&&l[e].count||0}}),O={categoryId1:u.categoryId,areaId1:u.areaId&&u.areaId[u.areaId.length-1],group1:u.group,schoolId1:u.schoolId,gender1:u.gender,categoryId2:h.categoryId,areaId2:h.areaId&&h.areaId[h.areaId.length-1],group2:h.group,schoolId2:h.schoolId,gender2:h.gender};for(var k in O){var D=O[k];D||delete O[k]}return j.a.createElement(c["a"],{bordered:!1},j.a.createElement(o["a"],{spinning:C},j.a.createElement(p["a"],{gutter:12,style:{marginTop:24}},j.a.createElement(m["a"],{span:6},j.a.createElement(z,y()({},x,{label:"\u8d5b\u9879"}),I("params[0][categoryId]",{initialValue:u.categoryId})(j.a.createElement(P["a"],{onChange:function(e){return a.categoryChange(e,1,3)},style:{width:"100%"}},f.map(function(a){return j.a.createElement(P["a"].Option,{key:a.id,value:a.id},j.a.createElement(g["a"],{title:a.name},a.name))}))))),j.a.createElement(m["a"],{span:6},j.a.createElement(z,y()({},x,{label:"\u533a\u57df"}),I("params[0][areaId]",{initialValue:u.areaId})(j.a.createElement(d["a"],{allowClear:!1,placeholder:"",onChange:function(e){return a.cascaderChange(e,1)},loadData:function(e){return a.loadCascaderData(e,1)},options:v.line1,style:{width:"100%"}})))),j.a.createElement(m["a"],{span:3},j.a.createElement(z,{labelCol:{span:7},wrapperCol:{span:17},label:"\u7ec4\u522b"},I("params[0][group]",{initialValue:u.group})(j.a.createElement(P["a"],{onChange:function(e){return a.groupChange(e,1)},style:{width:"100%"}},w.line1.map(function(a){return 1===a?j.a.createElement(L,{key:a,value:a},"\u5c0f\u5b66"):2===a?j.a.createElement(L,{key:a,value:a},"\u521d\u4e2d"):3===a?j.a.createElement(L,{key:a,value:a},"\u9ad8\u4e2d"):4===a?j.a.createElement(L,{key:a,value:a},"\u4e2d\u5b66"):void 0}))))),j.a.createElement(m["a"],{span:5},j.a.createElement(z,y()({},x,{label:"\u5b66\u6821"}),I("params[0][schoolId]",{initialValue:u.schoolId})(j.a.createElement(P["a"],{onChange:function(e){return a.schoolChange(e,1)},style:{width:"100%"}},_.line1.map(function(a){return j.a.createElement(L,{key:a.id,value:a.id},a.name)}))))),j.a.createElement(m["a"],{span:3},j.a.createElement(z,{labelCol:{span:7},wrapperCol:{span:17},label:"\u6027\u522b"},I("params[0][gender]",{initialValue:u.gender})(j.a.createElement(P["a"],{onChange:function(e){return a.genderChange(e,1)},style:{width:"100%"}},j.a.createElement(P["a"].Option,{value:"\u7537"},"\u7537"),j.a.createElement(P["a"].Option,{value:"\u5973"},"\u5973")))))),j.a.createElement(p["a"],{gutter:12},j.a.createElement(m["a"],{span:6},j.a.createElement(z,y()({},x,{label:"\u8d5b\u9879"}),I("params[1][categoryId]",{initialValue:h.categoryId})(j.a.createElement(P["a"],{onChange:function(e){return a.categoryChange(e,2,3)},style:{width:"100%"}},f.map(function(a){return j.a.createElement(P["a"].Option,{key:a.id,value:a.id},j.a.createElement(g["a"],{title:a.name},a.name))}))))),j.a.createElement(m["a"],{span:6},j.a.createElement(z,y()({},x,{label:"\u533a\u57df"}),I("params[1][areaId]",{initialValue:h.areaId})(j.a.createElement(d["a"],{allowClear:!1,placeholder:"",onChange:function(e){return a.cascaderChange(e,2)},loadData:function(e){return a.loadCascaderData(e,2)},options:v.line2,style:{width:"100%"}})))),j.a.createElement(m["a"],{span:3},j.a.createElement(z,{labelCol:{span:7},wrapperCol:{span:17},label:"\u7ec4\u522b"},I("params[1][group]",{initialValue:h.group})(j.a.createElement(P["a"],{onChange:function(e){return a.groupChange(e,2)},style:{width:"100%"}},w.line2.map(function(a){return 1===a?j.a.createElement(L,{key:a,value:a},"\u5c0f\u5b66"):2===a?j.a.createElement(L,{key:a,value:a},"\u521d\u4e2d"):3===a?j.a.createElement(L,{key:a,value:a},"\u9ad8\u4e2d"):4===a?j.a.createElement(L,{key:a,value:a},"\u4e2d\u5b66"):void 0}))))),j.a.createElement(m["a"],{span:5},j.a.createElement(z,y()({},x,{label:"\u5b66\u6821"}),I("params[1][schoolId]",{initialValue:h.schoolId})(j.a.createElement(P["a"],{onChange:function(e){return a.schoolChange(e,2)},style:{width:"100%"}},_.line2.map(function(a){return j.a.createElement(L,{key:a.id,value:a.id},a.name)}))))),j.a.createElement(m["a"],{span:3},j.a.createElement(z,{labelCol:{span:7},wrapperCol:{span:17},label:"\u6027\u522b"},I("params[1][gender]",{initialValue:h.gender})(j.a.createElement(P["a"],{onChange:function(e){return a.genderChange(e,2)},style:{width:"100%"}},j.a.createElement(P["a"].Option,{value:"\u7537"},"\u7537"),j.a.createElement(P["a"].Option,{value:"\u5973"},"\u5973")))))),j.a.createElement("div",{style:{marginTop:24,width:600}},j.a.createElement(p["a"],{gutter:16},j.a.createElement(m["a"],{span:4},j.a.createElement(s["a"],{loading:C,onClick:this.handleSubmit,style:{marginTop:3},type:"primary"},"\u7edf\u8ba1")),j.a.createElement(m["a"],{span:4},j.a.createElement(s["a"],{loading:C,onClick:this.handleReset,style:{marginTop:3},type:"primary"},"\u91cd\u7f6e")),j.a.createElement(m["a"],{span:4},j.a.createElement("a",{href:"/api/stats/prize/export?".concat(Object(S["stringify"])(O))},j.a.createElement(s["a"],{loading:C,style:{marginTop:3}},"\u5bfc\u51fa"))))),j.a.createElement("div",null,j.a.createElement(J["a"],{height:300,data:b,titleMap:{y1:"\u6570\u91cf1",y2:"\u6570\u91cf2"}}))))}}]),e}(M["PureComponent"]),l=i))||l)||l)}}]);