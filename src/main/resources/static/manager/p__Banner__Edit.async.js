(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{I0CO:function(e,a,t){"use strict";t.r(a),t.d(a,"default",function(){return O});t("IzEo");var n,l,r,i,o=t("bx4M"),s=(t("DZo9"),t("8z0m")),p=(t("+L6B"),t("2/Rp")),u=(t("giR+"),t("fyUT")),m=t("jehZ"),c=t.n(m),d=(t("5NDa"),t("5rEg")),f=(t("OaEy"),t("2fM7")),h=t("p0pE"),g=t.n(h),b=(t("miYZ"),t("tsqr")),y=t("2Taf"),v=t.n(y),E=t("vZ4D"),w=t.n(E),I=t("l4Ni"),P=t.n(I),V=t("ujKo"),C=t.n(V),L=t("MhPg"),F=t.n(L),M=(t("y8nQ"),t("Vl3Y")),U=t("q1tI"),j=t.n(U),T=t("MuoO"),_=t("usdK"),k={labelCol:{span:4},wrapperCol:{span:8}},q=M["a"].Item,O=(n=M["a"].create(),l=Object(T["connect"])(function(e){var a=e.banner,t=e.loading;return{banner:a,loading:t.models.banner}}),n(r=l((i=function(e){function a(){var e,t;v()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=P()(this,(e=C()(a)).call.apply(e,[this].concat(l))),t.state={type:1},t.onChange=function(e){t.setState({type:e})},t.normFile=function(e){return Array.isArray(e)?e:e.file.status?e&&e.fileList:e&&e.fileList&&e.fileList.filter(function(e){return!!e.response})},t.beforeUpload=function(e,a){var n=t.props.form.getFieldValue,l=n(a);if(l&&1===l.length)return b["a"].warning("\u53ea\u80fd\u4e0a\u4f201\u4e2a\u6587\u4ef6\uff01"),!1},t.fileMove=function(e){var a=t.props.dispatch;return e.response&&a({type:"global/fetch_file_del",payload:{path:e.response.value}}),!0},t.handleSubmit=function(){var e=t.props,a=e.dispatch,n=e.form.validateFields,l=e.match.params.id,r=t.state.type;n(function(e,t){e||a({type:"banner/fetch_banner_upd",payload:g()({},t,{smallImagePath:t.smallImagePath[0].response.value,bigImagePath:t.bigImagePath[0].response.value,type:r,id:l})})})},t}return F()(a,e),w()(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.dispatch,t=e.match.params.id;a({type:"banner/fetch_banner_item",payload:{id:t}})}},{key:"render",value:function(){var e=this,a=this.props,t=a.form.getFieldDecorator,n=a.loading,l=a.banner.banner_item,r=a.match.params.id,i=l[r]||{},m=i.title,h=i.number,g=i.bigImagePath,b=i.smallImagePath,y=i.url,v=i.type,E=j.a.createElement(f["a"],{onChange:this.onChange,defaultValue:v||1,style:{width:80}},j.a.createElement(f["a"].Option,{value:1},"\u5185\u94fe"),j.a.createElement(f["a"].Option,{value:2},"\u5916\u94fe"));return j.a.createElement(o["a"],{bordered:!1},j.a.createElement(o["a"],null,j.a.createElement(q,c()({},k,{label:"\u6807\u9898"}),t("title",{rules:[{required:!0,message:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:m})(j.a.createElement(d["a"],{placeholder:"\u8bf7\u586b\u5199\u6807\u9898"}))),j.a.createElement(q,c()({},k,{label:"\u4f4d\u7f6e\u7f16\u53f7"}),t("number",{rules:[{required:!0,message:"\u4f4d\u7f6e\u7f16\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:h})(j.a.createElement(u["a"],{style:{width:"100%"},placeholder:"\u8bf7\u586b\u5199\u4f4d\u7f6e\u7f16\u53f7"}))),j.a.createElement(q,c()({},k,{label:"\u5927\u56fe"}),t("bigImagePath",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5927\u56fe"}],valuePropName:"fileList",getValueFromEvent:this.normFile,initialValue:g&&[{uid:"-1",name:g.split("/")[g.split("/").length-1],status:"done",response:{value:g}}]||void 0})(j.a.createElement(s["a"],{name:"file",showUploadList:{showPreviewIcon:!1},listType:"picture-card",action:"/api/file/upload?fileType=5",accept:".jpg,.jpeg,.png",beforeUpload:function(a){return e.beforeUpload(a,"bigImagePath")},onRemove:this.fileMove},j.a.createElement(p["a"],{size:"small",type:"primary"},"\u4e0a\u4f20")))),j.a.createElement(q,c()({},k,{label:"\u5c0f\u56fe"}),t("smallImagePath",{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u5c0f\u56fe"}],valuePropName:"fileList",getValueFromEvent:this.normFile,initialValue:b&&[{uid:"-1",name:b.split("/")[b.split("/").length-1],status:"done",response:{value:b}}]||void 0})(j.a.createElement(s["a"],{name:"file",showUploadList:{showPreviewIcon:!1},listType:"picture-card",action:"/api/file/upload?fileType=5",accept:".jpg,.jpeg,.png",beforeUpload:function(a){return e.beforeUpload(a,"smallImagePath")},onRemove:this.fileMove},j.a.createElement(p["a"],{size:"small",type:"primary"},"\u4e0a\u4f20")))),j.a.createElement(q,c()({},k,{label:"\u8df3\u8f6c\u5730\u5740"}),t("url",{initialValue:y})(j.a.createElement(d["a"],{style:{marginTop:5},placeholder:"\u8bf7\u586b\u5199\u8df3\u8f6c\u5730\u5740",addonBefore:E}))),j.a.createElement("div",{style:{textAlign:"center"}},j.a.createElement(p["a"],{loading:n,onClick:this.handleSubmit,type:"primary"},"\u786e\u5b9a"),j.a.createElement(p["a"],{onClick:function(){_["a"].push("/banner/list")},style:{marginLeft:48}},"\u53d6\u6d88"))))}}]),a}(U["PureComponent"]),r=i))||r)||r)}}]);